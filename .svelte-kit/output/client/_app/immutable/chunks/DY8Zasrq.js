const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bi49eu1l.js","./CE1G-McA.js"])))=>i.map(i=>d[i]);
import{_ as O}from"./PPVm8Dsz.js";import{d as P,b as H,a as C,s as L,f as S}from"./zt7kUNSb.js";import{p as T,o as V,b,j as B,g as n,c as m,s as _,r as f,a as U,d as D,t as z}from"./D02y27Ec.js";import{i as G}from"./CyaklKEO.js";import{t as N,f as W}from"./Mk7LNAF3.js";import{b as E}from"./DtsVQfy1.js";var J=S('<div class="absolute inset-0 flex items-center justify-center p-8 bg-black/60 backdrop-blur-sm text-center svelte-2164l3"><p class="text-white text-sm font-medium svelte-2164l3"> </p></div>'),K=S(`<div class="fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-6 svelte-2164l3"><div class="relative w-full max-w-sm aspect-square rounded-3xl overflow-hidden border-2 border-white/20 shadow-2xl svelte-2164l3"><video class="w-full h-full object-cover svelte-2164l3"><track kind="captions" class="svelte-2164l3"/></video> <canvas class="hidden svelte-2164l3"></canvas> <div class="absolute inset-0 border-[40px] border-black/40 svelte-2164l3"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 border-2 border-gov-blue rounded-2xl svelte-2164l3"><div class="absolute top-0 left-0 w-full h-1 bg-gov-blue/50 shadow-[0_0_15px_rgba(0,103,172,0.8)] animate-scan svelte-2164l3"></div> <div class="absolute -top-1 -left-1 w-6 h-6 border-t-4 border-l-4 border-white rounded-tl-lg svelte-2164l3"></div> <div class="absolute -top-1 -right-1 w-6 h-6 border-t-4 border-r-4 border-white rounded-tr-lg svelte-2164l3"></div> <div class="absolute -bottom-1 -left-1 w-6 h-6 border-b-4 border-l-4 border-white rounded-bl-lg svelte-2164l3"></div> <div class="absolute -bottom-1 -right-1 w-6 h-6 border-b-4 border-r-4 border-white rounded-br-lg svelte-2164l3"></div></div> <!></div> <div class="mt-12 text-center space-y-2 svelte-2164l3"><h3 class="text-white font-bold text-lg svelte-2164l3">Scan QR Code</h3> <p class="text-gray-400 text-sm svelte-2164l3">Position the document's QR code within the frame</p></div> <button class="mt-16 py-3 px-8 rounded-full bg-white/10 border border-white/20 text-white text-xs font-black uppercase tracking-widest hover:bg-white/20 active:scale-95 transition-all cursor-pointer svelte-2164l3">CLOSE</button></div>`,2);function ae(q,l){T(l,!0);let t,d,o=D(!1),h=D(""),c=null,r=null,g=null;V(async()=>{try{b(o,!0),g=await O(()=>import("./Bi49eu1l.js").then(e=>e.j),__vite__mapDeps([0,1]),import.meta.url),c=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),t&&(t.srcObject=c,t.setAttribute("playsinline","true"),await t.play(),R())}catch{b(h,"Could not access camera. Please ensure permissions are granted."),b(o,!1)}}),B(()=>{v()});function v(){b(o,!1),r!==null&&(cancelAnimationFrame(r),r=null),c&&c.getTracks().forEach(e=>e.stop())}async function R(){if(!n(o)||!g)return;const e=g.default;let i=0;const s=()=>{if(!(!n(o)||!t||!d)){if(i++,i%3!==0){r=requestAnimationFrame(s);return}if(t.readyState===t.HAVE_ENOUGH_DATA){const a=d,p=a.getContext("2d",{willReadFrequently:!0});if(!p){r=requestAnimationFrame(s);return}if(a.height=t.videoHeight,a.width=t.videoWidth,p.drawImage(t,0,0,a.width,a.height),"BarcodeDetector"in window)try{new BarcodeDetector({formats:["qr_code"]}).detect(t).then(j=>{j.length>0&&n(o)&&(l.onScan?.(j[0].rawValue),v(),l.onClose?.())})}catch{}const x=p.getImageData(0,0,a.width,a.height),A=e(x.data,x.width,x.height,{inversionAttempts:"dontInvert"});if(A){l.onScan?.(A.data),v(),l.onClose?.();return}}r=requestAnimationFrame(s)}};r=requestAnimationFrame(s)}var u=K(),w=m(u),y=m(w);E(y,e=>t=e,()=>t);var k=_(y,2);E(k,e=>d=e,()=>d);var F=_(k,6);{var Q=e=>{var i=J(),s=m(i),a=m(s,!0);f(s),f(i),z(()=>L(a,n(h))),C(e,i)};G(F,e=>{n(h)&&e(Q)})}f(w);var I=_(w,4);f(u),H("click",I,()=>{v(),l.onClose?.()}),N(3,u,()=>W),C(q,u),U()}P(["click"]);export{ae as Q};
