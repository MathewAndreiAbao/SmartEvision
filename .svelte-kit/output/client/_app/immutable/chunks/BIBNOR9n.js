import{w as d}from"./D02y27Ec.js";import{s as t}from"./DG2cR9Zm.js";const i={submission_window_days:5,maintenance_mode:!1,enforce_ocr:!0,max_upload_size_mb:2};function f(){const{subscribe:r,set:_,update:m}=d(i);return{subscribe:r,async init(){const{data:o,error:c}=await t.from("system_settings").select("*");if(!c&&o){const s={...i};o.forEach(e=>{e.key==="submission_window_days"&&(s.submission_window_days=parseInt(e.value)),e.key==="maintenance_mode"&&(s.maintenance_mode=e.value==="true"),e.key==="enforce_ocr"&&(s.enforce_ocr=e.value==="true"),e.key==="max_upload_size_mb"&&(s.max_upload_size_mb=parseFloat(e.value))}),_(s)}t.channel("global-settings").on("postgres_changes",{event:"*",schema:"public",table:"system_settings"},s=>{const{key:e,value:n}=s.new;m(u=>{const a={...u};return e==="submission_window_days"&&(a.submission_window_days=parseInt(n)),e==="maintenance_mode"&&(a.maintenance_mode=n==="true"),e==="enforce_ocr"&&(a.enforce_ocr=n==="true"),e==="max_upload_size_mb"&&(a.max_upload_size_mb=parseFloat(n)),a})}).subscribe()}}}const p=f();export{p as s};
