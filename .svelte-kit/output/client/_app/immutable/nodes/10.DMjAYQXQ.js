import{d as ct,b as c,a as u,f as p,s as T}from"../chunks/zt7kUNSb.js";import{p as vt,d as A,f as ut,o as pt,h as xt,a as bt,e as mt,s as d,c as r,b as o,$ as ft,r as a,g as e,t as P}from"../chunks/D02y27Ec.js";import{i as Y}from"../chunks/CyaklKEO.js";import{e as z,i as C}from"../chunks/CUJHGDU6.js";import{h as gt,s as $,a as B,r as ht,c as _t}from"../chunks/DG2cR9Zm.js";import{b as yt}from"../chunks/7bhswH3j.js";import{a as wt,s as kt}from"../chunks/HxVFllSf.js";import{p as jt}from"../chunks/t4rw-3Qc.js";import{a as G}from"../chunks/0ZKSTxe_.js";var At=p('<div class="glass-card-static p-5 animate-pulse"><div class="h-4 bg-gray-200 rounded w-1/3"></div></div>'),Gt=p('<div class="space-y-3"></div>'),Lt=p('<div class="text-center py-20"><p class="text-xl font-semibold text-text-primary">No teaching loads yet</p> <p class="text-base text-text-muted mt-2">Add your grade levels and subjects to start</p> <button class="mt-6 px-6 py-3 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white font-semibold rounded-xl shadow-md min-h-[48px]">+ Add Your First Load</button></div>'),Tt=p('<tr class="hover:bg-white/40 transition-colors"><td class="px-6 py-4 text-sm font-medium text-text-primary"> </td><td class="px-6 py-4 text-sm text-text-secondary"> </td><td class="px-6 py-4 text-center"><button aria-label="Toggle active"><span></span></button></td><td class="px-6 py-4 text-right"><button class="text-gov-blue hover:text-gov-blue-dark text-sm font-medium mr-3 min-h-[48px]">Edit</button> <button class="text-gov-red hover:text-red-700 text-sm font-medium min-h-[48px]">Delete</button></td></tr>'),$t=p('<div class="glass-card-static overflow-hidden"><table class="w-full"><thead><tr class="border-b border-gray-100"><th class="px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase">Grade Level</th><th class="px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase">Subject</th><th class="px-6 py-4 text-center text-xs font-semibold text-text-muted uppercase">Active</th><th class="px-6 py-4 text-right text-xs font-semibold text-text-muted uppercase">Actions</th></tr></thead><tbody class="divide-y divide-gray-50"></tbody></table></div>'),Et=p("<option> </option>"),It=p('<div class="fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-6" role="dialog" tabindex="-1"><div class="glass-card-static p-8 w-full max-w-md animate-slide-up" role="document"><h2 class="text-xl font-bold text-text-primary mb-6"> </h2> <div class="space-y-5"><div><label for="grade" class="block text-sm font-semibold text-text-primary mb-2">Grade Level</label> <select id="grade" class="w-full px-4 py-3 text-base bg-white/60 border border-gray-200 rounded-xl min-h-[48px]"></select></div> <div><label for="subjectInput" class="block text-sm font-semibold text-text-primary mb-2">Subject</label> <input id="subjectInput" type="text" placeholder="e.g., Mathematics" class="w-full px-4 py-3 text-base bg-white/60 border border-gray-200 rounded-xl min-h-[48px]"/></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 py-3 border border-gray-200 text-text-secondary font-semibold rounded-xl min-h-[48px] hover:bg-gray-50 transition-colors">Cancel</button> <button class="flex-1 py-3 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white font-semibold rounded-xl min-h-[48px] shadow-md hover:shadow-lg transition-all"> </button></div></div></div>'),St=p('<div><div class="mb-8 flex items-start justify-between"><div><h1 class="text-2xl font-bold text-text-primary">Teaching Load</h1> <p class="text-base text-text-secondary mt-1">Manage your subjects and grade levels</p></div> <button class="px-6 py-3 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white font-semibold rounded-xl shadow-md hover:shadow-lg hover:scale-105 transition-all duration-300 min-h-[48px] flex items-center gap-2">+ Add Load</button></div> <!></div> <!>',1);function Ot(H,J){vt(J,!0);const F=()=>kt(jt,"$profile",Q),[Q,R]=wt();let q=A(ut([])),K=A(!0),x=A(!1),_=A(null),y=A("Grade 1"),b=A("");const W=["Kindergarten","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"];pt(async()=>{await E(),o(K,!1)});async function E(){const{data:t}=await $.from("teaching_loads").select("*").eq("user_id",F().id).order("grade_level");o(q,t||[],!0)}function O(){o(_,null),o(y,"Grade 1"),o(b,""),o(x,!0)}function X(t){o(_,t.id,!0),o(y,t.grade_level,!0),o(b,t.subject,!0),o(x,!0)}async function Z(){if(!e(b).trim()){G("warning","Please enter a subject");return}if(e(_)){const{error:t}=await $.from("teaching_loads").update({grade_level:e(y),subject:e(b).trim()}).eq("id",e(_));if(t){G("error",t.message);return}G("success","Teaching load updated")}else{const{error:t}=await $.from("teaching_loads").insert({user_id:F().id,grade_level:e(y),subject:e(b).trim()});if(t){G("error",t.message);return}G("success","Teaching load added")}o(x,!1),await E()}async function tt(t){await $.from("teaching_loads").update({is_active:!t.is_active}).eq("id",t.id),await E()}async function et(t){confirm("Are you sure you want to remove this teaching load?")&&(await $.from("teaching_loads").delete().eq("id",t),G("success","Teaching load removed"),await E())}var U=St();gt("1g84nau",t=>{mt(()=>{ft.title="Teaching Load â€” Smart E-VISION"})});var M=xt(U),D=r(M),at=d(r(D),2);a(D);var rt=d(D,2);{var st=t=>{var s=Gt();z(s,20,()=>Array(3),C,(l,m)=>{var L=At();u(l,L)}),a(s),u(t,s)},ot=t=>{var s=Lt(),l=d(r(s),4);a(s),c("click",l,O),u(t,s)},dt=t=>{var s=$t(),l=r(s),m=d(r(l));z(m,21,()=>e(q),C,(L,n)=>{var f=Tt(),g=r(f),I=r(g,!0);a(g);var w=d(g),S=r(w,!0);a(w);var k=d(w),v=r(k),N=r(v);a(v),a(k);var i=d(k),j=r(i),h=d(j,2);a(i),a(f),P(()=>{T(I,e(n).grade_level),T(S,e(n).subject),B(v,1,`w-12 h-7 rounded-full relative transition-colors ${e(n).is_active?"bg-gov-green":"bg-gray-300"}`),B(N,1,`absolute top-0.5 transition-transform w-6 h-6 rounded-full bg-white shadow ${e(n).is_active?"translate-x-5":"translate-x-0.5"}`)}),c("click",v,()=>tt(e(n))),c("click",j,()=>X(e(n))),c("click",h,()=>et(e(n).id)),u(L,f)}),a(m),a(l),a(s),u(t,s)};Y(rt,t=>{e(K)?t(st):e(q).length===0?t(ot,1):t(dt,!1)})}a(M);var it=d(M,2);{var lt=t=>{var s=It(),l=r(s),m=r(l),L=r(m);a(m);var n=d(m,2),f=r(n),g=d(r(f),2);z(g,21,()=>W,C,(i,j)=>{var h=Et(),nt=r(h,!0);a(h);var V={};P(()=>{T(nt,e(j)),V!==(V=e(j))&&(h.value=(h.__value=e(j))??"")}),u(i,h)}),a(g),a(f);var I=d(f,2),w=d(r(I),2);ht(w),a(I),a(n);var S=d(n,2),k=r(S),v=d(k,2),N=r(v,!0);a(v),a(S),a(l),a(s),P(()=>{T(L,`${e(_)?"Edit":"Add"} Teaching Load`),T(N,e(_)?"Update":"Add")}),c("click",s,()=>o(x,!1)),c("keydown",s,i=>i.key==="Escape"&&o(x,!1)),c("click",l,i=>i.stopPropagation()),c("keydown",l,()=>{}),_t(g,()=>e(y),i=>o(y,i)),yt(w,()=>e(b),i=>o(b,i)),c("click",k,()=>o(x,!1)),c("click",v,Z),u(t,s)};Y(it,t=>{e(x)&&t(lt)})}c("click",at,O),u(H,U),bt(),R()}ct(["click","keydown"]);export{Ot as component};
