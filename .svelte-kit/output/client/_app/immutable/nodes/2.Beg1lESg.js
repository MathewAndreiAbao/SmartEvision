import{d as oe,c as ue,a as u,s as Q,f as b,b as N,t as me,e as de}from"../chunks/zt7kUNSb.js";import{p as te,o as se,b as s,h as ae,g as e,a as re,d as E,c as a,r as t,s as l,t as G,aD as ce,i as B,u as Se,e as ke,$ as $e}from"../chunks/D02y27Ec.js";import{i as I}from"../chunks/CyaklKEO.js";import{s as Ie}from"../chunks/Yh2m8Y0m.js";import{b as J,a as ve,h as Te}from"../chunks/DG2cR9Zm.js";import{s as ee,a as fe}from"../chunks/HxVFllSf.js";import{e as xe,i as be}from"../chunks/CUJHGDU6.js";import{c as ge}from"../chunks/BcSwuURU.js";import{p as Ce}from"../chunks/DcK2uUSv.js";import{p as De,a as Ne,u as Me}from"../chunks/t4rw-3Qc.js";import{t as _e,a as Le,f as Ee}from"../chunks/Mk7LNAF3.js";import{pendingSyncCount as Ae,processQueue as ze,preloadVerificationHashes as Oe}from"../chunks/fWpnswL0.js";import{s as Pe}from"../chunks/BESCyOOZ.js";import{C as je}from"../chunks/BTf-ztL-.js";import{L as He,C as We,A as Ue,B as Ve,M as Re,Q as Xe,a as Be}from"../chunks/CpwdSydo.js";import{C as Qe}from"../chunks/DB24PY1k.js";import{S as we}from"../chunks/CBsLl3Jd.js";import{T as Ge}from"../chunks/DVHe6b_l.js";import{S as Ke}from"../chunks/DrneAqZx.js";import{X as Ye}from"../chunks/DNtYVHkI.js";import{s as Ze}from"../chunks/BIBNOR9n.js";import{g as qe}from"../chunks/Gotkd5Cc.js";var Fe=b('<span class="px-2 py-0.5 bg-gov-blue/10 text-gov-blue text-[12px] font-bold rounded-full"> </span>'),Je=b(`<p class="text-[12px] text-text-muted leading-tight">You're offline. Uploads will be saved and synced
                    automatically when back online.</p>`),et=b('<button class="w-full py-2.5 bg-gov-blue text-white rounded-xl text-[14px] font-bold hover:bg-gov-blue-dark transition-all disabled:opacity-50 flex items-center justify-center gap-2"><!></button>'),tt=b('<div class="mt-auto pt-6 border-t border-gray-100 px-2"><div class="glass-card-static p-4 space-y-3"><div class="flex items-center justify-between"><span class="text-[14px] font-medium text-text-primary flex items-center gap-2"> </span> <!></div> <!></div></div>');function at(A,M){te(M,!0);const n=()=>ee(Ae,"$pendingSyncCount",h),[h,S]=fe();let f=E(!0),m=E(!1);se(()=>{s(f,navigator.onLine,!0),window.addEventListener("online",()=>s(f,!0)),window.addEventListener("offline",()=>s(f,!1))});async function x(){if(!(e(m)||!e(f))){s(m,!0);try{await ze(!0)}finally{s(m,!1)}}}var T=ue(),w=ae(T);{var i=c=>{var v=tt(),p=a(v),k=a(p),$=a(k),C=a($,!0);t($);var j=l($,2);{var H=y=>{var d=Fe(),g=a(d);t(d),G(()=>Q(g,`${n()??""} pending`)),u(y,d)};I(j,y=>{n()>0&&y(H)})}t(k);var Y=l(k,2);{var Z=y=>{var d=Je();u(y,d)},q=y=>{var d=et(),g=a(d);{var W=U=>{var F=me("Syncing...");u(U,F)},K=U=>{var F=me("Sync Now");u(U,F)};I(g,U=>{e(m)?U(W):U(K,!1)})}t(d),G(()=>d.disabled=e(m)),N("click",d,x),u(y,d)};I(Y,y=>{e(f)?n()>0&&y(q,1):y(Z)})}t(p),t(v),G(()=>Q(C,e(f)?"Online":"Offline")),_e(1,v,()=>Le,()=>({y:20,duration:400})),_e(2,v,()=>Ee),u(c,v)};I(w,c=>{(n()>0||!e(f))&&c(i)})}u(A,T),re(),S()}oe(["click"]);var rt=b('<div class="lg:hidden fixed inset-0 bg-slate-900/60 backdrop-blur-md z-40 transition-opacity duration-500" role="presentation"></div>'),ot=b('<li><a><div class="flex items-center gap-3"><!> <span> </span></div> <!></a></li>'),st=b('<div class="p-6 border-t border-border-subtle bg-surface-muted/30" role="contentinfo" aria-label="User Profile Summary"><div class="flex items-center gap-4 mb-4"><div class="w-11 h-11 rounded-2xl bg-gov-blue/10 flex items-center justify-center text-sm font-black text-gov-blue border-2 border-white shadow-sm" aria-hidden="true"> </div> <div class="flex-1 min-w-0"><p class="text-sm font-black text-text-primary truncate"> </p> <p class="text-[10px] text-text-muted font-bold uppercase tracking-wider truncate"> </p></div></div> <!></div>'),it=b('<a><!> <span class="text-[9px] font-black uppercase tracking-tighter"> </span></a>'),nt=b('<button class="lg:hidden fixed top-4 left-4 z-50 w-12 h-12 flex items-center justify-center rounded-2xl bg-gov-blue text-white shadow-lg active:scale-95 transition-all" aria-label="Toggle menu"><!></button> <!> <aside role="navigation" aria-label="Main Sidebar Navigation"><a href="/dashboard" class="block p-8 mb-4 no-underline group" aria-label="Go to Dashboard"><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-2xl gov-header-gradient flex items-center justify-center text-white text-2xl font-black shadow-lg shadow-gov-blue/20 group-hover:scale-105 transition-transform" aria-hidden="true">E</div> <div><h1 id="dashboard-title" class="text-lg font-black text-text-primary leading-none tracking-tighter">Smart E-VISION</h1> <p class="text-[10px] text-text-muted font-bold uppercase tracking-[0.2em] mt-1">System Hub</p></div></div></a> <nav class="flex-1 px-4 overflow-y-auto" aria-label="Sidebar Menu"><ul class="space-y-2"></ul></nav> <!></aside> <nav class="lg:hidden fixed bottom-6 left-6 right-6 z-40 glass-card-static border border-white/40 shadow-2xl" aria-label="Mobile Navigation Bar"><div class="flex items-center justify-around p-2"></div></nav>',1);function lt(A,M){te(M,!0);const n=()=>ee(De,"$profile",S),h=()=>ee(Ce,"$page",S),[S,f]=fe(),m=[{href:"/dashboard",label:"Dashboard",icon:He,mobileNav:!0,roles:["Teacher","School Head","Master Teacher","District Supervisor"]},{href:"/dashboard/calendar",label:"Calendar",icon:Qe,mobileNav:!0,roles:["Teacher","School Head","Master Teacher","District Supervisor"]},{href:"/dashboard/upload",label:"Upload",icon:We,mobileNav:!0,roles:["Teacher"]},{href:"/dashboard/archive",label:"Archive",icon:Ue,mobileNav:!0,roles:["Teacher","School Head","Master Teacher","District Supervisor"]},{href:"/dashboard/load",label:"Teaching Load",icon:Ve,roles:["Teacher"]},{href:"/dashboard/monitoring/school",label:"School Monitor",icon:we,mobileNav:!0,roles:["School Head","Master Teacher"]},{href:"/dashboard/monitoring/district",label:"District Monitor",icon:Re,mobileNav:!0,roles:["District Supervisor"]},{href:"/dashboard/analytics",label:"Analytics",icon:Ge,roles:["School Head","Master Teacher","District Supervisor"]},{href:"/dashboard/settings",label:"Settings",icon:Ke,roles:["Teacher","School Head","Master Teacher","District Supervisor"]},{href:"/dashboard/admin",label:"Admin Panel",icon:we,roles:["District Supervisor"]},{href:"#scan",label:"Scan Document",icon:Xe,mobileNav:!0,roles:["Teacher","School Head","Master Teacher","District Supervisor"],onClick:r=>{r.preventDefault(),Pe.set(!0)}}];let x=E(!1);const T=B(()=>m.filter(r=>{const o=n()?.role?.toLowerCase()||"";return r.roles.some(z=>o.includes(z.toLowerCase().trim()))})),w=B(()=>e(T).filter(r=>r.mobileNav).slice(0,5));function i(r){const o=h().url.pathname;return r==="/dashboard"?o==="/dashboard":o.startsWith(r)}let c=0,v=0,p=!1;function k(r){c=r.touches[0].clientX,c<30&&(p=!0)}function $(r){p&&(v=r.touches[0].clientX)}function C(){if(!p)return;v-c>80&&s(x,!0),p=!1}var j=nt();de("touchstart",ce,k,void 0,!0),de("touchmove",ce,$,void 0,!0),de("touchend",ce,C);var H=ae(j),Y=a(H);{var Z=r=>{Ye(r,{size:24})},q=r=>{Be(r,{size:24})};I(Y,r=>{e(x)?r(Z):r(q,!1)})}t(H);var y=l(H,2);{var d=r=>{var o=rt();N("click",o,()=>s(x,!1)),u(r,o)};I(y,r=>{e(x)&&r(d)})}var g=l(y,2),W=l(a(g),2),K=a(W);xe(K,21,()=>e(T),be,(r,o)=>{const z=B(()=>e(o).icon);var _=ot(),D=a(_),O=a(D),V=a(O);{let P=B(()=>i(e(o).href)?2.5:2);ge(V,()=>e(z),(le,ye)=>{ye(le,{size:20,get strokeWidth(){return e(P)},"aria-hidden":"true"})})}var L=l(V,2),R=a(L,!0);t(L),t(O);var X=l(O,2);{var ie=P=>{je(P,{size:16,"aria-hidden":"true"})},ne=B(()=>i(e(o).href));I(X,P=>{e(ne)&&P(ie)})}t(D),t(_),G((P,le)=>{J(D,"href",e(o).href),ve(D,1,`flex items-center justify-between px-4 py-3 rounded-xl text-sm font-bold transition-all duration-200 group
							${P??""}`),J(D,"aria-current",le),Q(R,e(o).label)},[()=>i(e(o).href)?"bg-gov-blue text-white shadow-lg shadow-gov-blue/10":"text-text-secondary hover:bg-surface-muted hover:text-gov-blue",()=>i(e(o).href)?"page":void 0]),N("click",D,P=>{e(o).onClick&&e(o).onClick(P),s(x,!1)}),u(r,_)}),t(K),t(W);var U=l(W,2);{var F=r=>{var o=st(),z=a(o),_=a(z),D=a(_,!0);t(_);var O=l(_,2),V=a(O),L=a(V,!0);t(V);var R=l(V,2),X=a(R,!0);t(R),t(O),t(z);var ie=l(z,2);at(ie,{}),t(o),G(ne=>{Q(D,ne),Q(L,n().full_name),Q(X,n().role)},[()=>n().full_name?.charAt(0)||"?"]),u(r,o)};I(U,r=>{n()&&r(F)})}t(g);var pe=l(g,2),he=a(pe);xe(he,21,()=>e(w),be,(r,o)=>{const z=B(()=>e(o).icon);var _=it(),D=a(_);{let L=B(()=>i(e(o).href)?2.5:2);ge(D,()=>e(z),(R,X)=>{X(R,{size:22,get strokeWidth(){return e(L)},"aria-hidden":"true"})})}var O=l(D,2),V=a(O,!0);t(O),t(_),G((L,R,X)=>{J(_,"href",e(o).href),ve(_,1,`flex flex-col items-center gap-1 p-2 rounded-xl transition-all duration-300 min-h-[48px] min-w-[48px]
					${L??""}`),J(_,"aria-current",R),J(_,"aria-label",e(o).label),Q(V,X)},[()=>i(e(o).href)?"text-gov-blue bg-gov-blue/10 scale-110":"text-text-muted hover:text-gov-blue",()=>i(e(o).href)?"page":void 0,()=>e(o).label.split(" ")[0]]),N("click",_,L=>{e(o).onClick&&e(o).onClick(L),s(x,!1)}),u(r,_)}),t(he),t(pe),G(()=>ve(g,1,`fixed top-0 left-0 h-full w-72 z-50 flex flex-col bg-white border-r border-border-subtle shadow-xl transition-transform duration-500 ease-pop
		${e(x)?"translate-x-0":"-translate-x-full"} lg:translate-x-0`)),N("click",H,()=>s(x,!e(x))),u(A,j),re(),f()}oe(["click"]);var dt=b(`<p class="text-xs text-text-muted mt-1 leading-relaxed">Tap <strong>Share</strong> (□↑) then <strong>"Add to Home Screen"</strong> for the full app
                            experience.</p>`),ct=b(`<p class="text-xs text-text-muted mt-1 leading-relaxed">Install as an app for faster access, offline
                            support, and push notifications.</p>`),vt=b('<div class="flex gap-2 mt-4"><button class="flex-1 py-2.5 px-4 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white rounded-xl font-semibold text-sm hover:shadow-lg transition-all hover:-translate-y-0.5 cursor-pointer">Install App</button> <button class="py-2.5 px-4 text-text-muted hover:text-text-primary text-sm font-medium transition-colors cursor-pointer">Not now</button></div>'),ut=b('<div class="fixed bottom-24 lg:bottom-6 left-4 right-4 lg:left-auto lg:right-6 lg:w-96 z-50 animate-slide-up"><div class="glass-card p-5 border-l-4 border-gov-blue shadow-elevated"><div class="flex items-start gap-3"><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-gov-blue to-gov-blue-dark flex items-center justify-center text-white text-xl font-bold shrink-0">E</div> <div class="flex-1 min-w-0"><h3 class="font-bold text-text-primary text-sm">Install Smart E-VISION</h3> <!></div> <button class="text-text-muted hover:text-text-primary transition-colors text-lg leading-none p-1 cursor-pointer" aria-label="Dismiss">✕</button></div> <!></div></div>');function ft(A,M){te(M,!0);let n=E(null),h=E(!1),S=E(!1),f=E(!1),m=E(!1);se(()=>{if(window.matchMedia("(display-mode: standalone)").matches){s(f,!0);return}const v=navigator.userAgent;s(S,/iPad|iPhone|iPod/.test(v)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,!0),window.addEventListener("beforeinstallprompt",p=>{p.preventDefault(),s(n,p,!0),setTimeout(()=>{e(m)||s(h,!0)},3e3)}),window.addEventListener("appinstalled",()=>{s(f,!0),s(h,!1),s(n,null)}),e(S)&&!e(f)&&setTimeout(()=>{e(m)||s(h,!0)},5e3)});async function x(){if(!e(n))return;e(n).prompt();const{outcome:v}=await e(n).userChoice;v==="accepted"&&s(f,!0),s(n,null),s(h,!1)}function T(){s(h,!1),s(m,!0)}var w=ue(),i=ae(w);{var c=v=>{var p=ut(),k=a(p),$=a(k),C=l(a($),2),j=l(a(C),2);{var H=d=>{var g=dt();u(d,g)},Y=d=>{var g=ct();u(d,g)};I(j,d=>{e(S)?d(H):d(Y,!1)})}t(C);var Z=l(C,2);t($);var q=l($,2);{var y=d=>{var g=vt(),W=a(g),K=l(W,2);t(g),N("click",W,x),N("click",K,T),u(d,g)};I(q,d=>{e(S)||d(y)})}t(k),t(p),N("click",Z,T),u(v,p)};I(i,v=>{e(h)&&!e(f)&&!e(m)&&v(c)})}u(A,w),re()}oe(["click"]);var pt=b('<div class="fixed top-4 left-4 right-4 lg:left-auto lg:right-6 lg:w-96 z-[60] animate-slide-up"><div class="glass-card p-4 border-l-4 border-gov-green shadow-elevated"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-gov-green flex items-center justify-center text-white text-[10px] font-black shrink-0">NEW</div> <div class="flex-1 min-w-0"><h3 class="font-bold text-text-primary text-sm">Update Available</h3> <p class="text-xs text-text-muted mt-0.5">A new version of Smart E-VISION is ready.</p></div> <button class="text-text-muted hover:text-text-primary text-sm p-1 cursor-pointer font-bold" aria-label="Dismiss">CLOSE</button></div> <div class="flex gap-2 mt-3"><button class="flex-1 py-2 px-4 bg-gov-green text-white rounded-xl font-semibold text-sm hover:shadow-lg transition-all cursor-pointer">Refresh Now</button> <button class="py-2 px-4 text-text-muted text-sm font-medium cursor-pointer">Later</button></div></div></div>');function ht(A,M){te(M,!0);let n=E(!1),h=E(null);se(()=>{if(!("serviceWorker"in navigator))return;navigator.serviceWorker.ready.then(i=>{i.waiting&&(s(h,i.waiting,!0),s(n,!0)),i.addEventListener("updatefound",()=>{const c=i.installing;c&&c.addEventListener("statechange",()=>{c.state==="installed"&&navigator.serviceWorker.controller&&(s(h,c,!0),s(n,!0))})})});let w=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{w||(w=!0,window.location.reload())})});function S(){e(h)&&e(h).postMessage({type:"SKIP_WAITING"}),s(n,!1)}function f(){s(n,!1)}var m=ue(),x=ae(m);{var T=w=>{var i=pt(),c=a(i),v=a(c),p=l(a(v),4);t(v);var k=l(v,2),$=a(k),C=l($,2);t(k),t(c),t(i),N("click",p,f),N("click",$,S),N("click",C,f),u(w,i)};I(x,w=>{e(n)&&w(T)})}u(A,m),re()}oe(["click"]);var mt=b('<div class="min-h-screen gradient-mesh flex items-center justify-center" role="status" aria-label="Loading Dashboard"><div class="text-center animate-fade-in"><div class="w-16 h-16 mx-auto rounded-2xl gov-header-gradient flex items-center justify-center text-white text-3xl font-bold shadow-elevated mb-4 animate-pulse-glow">V</div> <p class="text-lg text-text-secondary font-medium uppercase tracking-widest text-xs">INITIALIZING CORE...</p></div></div>'),xt=b('<div class="min-h-screen bg-surface"><!>  <main id="main-content" class="lg:ml-72 min-h-screen" aria-labelledby="dashboard-title"><div class="p-4 pt-16 lg:pt-8 lg:p-8 pb-24 lg:pb-8 max-w-7xl mx-auto"><!></div></main> <!> <!></div>'),bt=b('<a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[100] focus:px-6 focus:py-3 focus:bg-gov-blue focus:text-white focus:font-bold focus:rounded-xl focus:shadow-2xl">Skip to Content</a> <!>',1);function Ut(A,M){te(M,!0);const n=()=>ee(Ne,"$authLoading",S),h=()=>ee(Me,"$user",S),[S,f]=fe();Se(()=>{!n()&&!h()&&qe("/auth/login")}),se(async()=>{Ze.init(),h()&&await Oe()});var m=bt();Te("2agd5u",i=>{ke(()=>{$e.title="Smart E-VISION — DASHBOARD"})});var x=l(ae(m),2);{var T=i=>{var c=mt();u(i,c)},w=i=>{var c=xt(),v=a(c);lt(v,{});var p=l(v,2),k=a(p),$=a(k);Ie($,()=>M.children),t(k),t(p);var C=l(p,2);ft(C,{});var j=l(C,2);ht(j,{}),t(c),u(i,c)};I(x,i=>{n()?i(T):h()&&i(w,1)})}u(A,m),re(),f()}export{Ut as component};
