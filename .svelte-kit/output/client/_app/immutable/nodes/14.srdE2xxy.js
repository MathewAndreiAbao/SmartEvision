const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CISyghF3.js","../chunks/DG2cR9Zm.js","../chunks/D02y27Ec.js","../chunks/zt7kUNSb.js"])))=>i.map(i=>d[i]);
import{_ as D}from"../chunks/PPVm8Dsz.js";import{d as ve,b,a as me,f as xe,s as c}from"../chunks/zt7kUNSb.js";import{p as fe,o as ge,t as ye,g as s,a as _e,e as he,s as e,c as t,b as o,d as n,$ as we,r as a,n as Pe}from"../chunks/D02y27Ec.js";import{h as ke,s as J,r as G,a as P}from"../chunks/DG2cR9Zm.js";import{b as L}from"../chunks/7bhswH3j.js";import{a as $e,s as Se}from"../chunks/HxVFllSf.js";import{b as Ee,p as Ne}from"../chunks/t4rw-3Qc.js";import{a as p}from"../chunks/0ZKSTxe_.js";import{g as Ve}from"../chunks/Gotkd5Cc.js";import{getQueueSize as Oe}from"../chunks/fWpnswL0.js";var Te=xe('<div class="max-w-2xl"><div class="mb-8"><h1 class="text-2xl font-bold text-text-primary">Settings</h1> <p class="text-base text-text-secondary mt-1">Manage your profile and preferences</p></div> <div class="space-y-8"><div class="glass-card-static p-6"><h2 class="text-lg font-bold text-text-primary mb-5">Profile</h2> <div class="space-y-4"><div><label for="fullName" class="block text-sm font-semibold text-text-primary mb-2">Full Name</label> <input id="fullName" type="text" class="w-full px-4 py-3 text-base bg-white/60 border border-gray-200 rounded-xl min-h-[48px]"/></div> <div><span class="block text-sm font-semibold text-text-primary mb-2">Email</span> <p class="px-4 py-3 text-base bg-gray-50 border border-gray-200 rounded-xl text-text-muted min-h-[48px] flex items-center"> </p></div> <div><span class="block text-sm font-semibold text-text-primary mb-2">Role</span> <p class="px-4 py-3 text-base bg-gray-50 border border-gray-200 rounded-xl text-text-muted min-h-[48px] flex items-center"> </p></div> <button class="px-6 py-3 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white font-semibold rounded-xl min-h-[48px] shadow-md hover:shadow-lg transition-all disabled:opacity-60"> </button></div></div> <div class="glass-card-static p-6"><h2 class="text-lg font-bold text-text-primary mb-5">Change Password</h2> <div class="space-y-4"><div><label for="newPass" class="block text-sm font-semibold text-text-primary mb-2">New Password</label> <input id="newPass" type="password" placeholder="Minimum 6 characters" class="w-full px-4 py-3 text-base bg-white/60 border border-gray-200 rounded-xl min-h-[48px]"/></div> <div><label for="confirmPass" class="block text-sm font-semibold text-text-primary mb-2">Confirm Password</label> <input id="confirmPass" type="password" placeholder="Re-enter new password" class="w-full px-4 py-3 text-base bg-white/60 border border-gray-200 rounded-xl min-h-[48px]"/></div> <button class="px-6 py-3 bg-gradient-to-r from-gov-blue to-gov-blue-dark text-white font-semibold rounded-xl min-h-[48px] shadow-md hover:shadow-lg transition-all disabled:opacity-60"> </button></div></div> <div class="glass-card-static p-6"><h2 class="text-lg font-bold text-text-primary mb-5">Preferences & Status</h2> <div class="space-y-4"><div class="flex items-center justify-between py-2 border-b border-gray-100"><div><span class="block text-sm font-semibold text-text-primary">Voice Guidance</span> <p class="text-[10px] text-text-muted">Grandparent UX: Spoken feedback for system actions</p></div> <button><span class="sr-only">Toggle voice guidance</span> <span></span></button></div> <div class="flex items-center justify-between py-2 border-b border-gray-100"><div><span class="block text-sm font-semibold text-text-primary">Push Notifications</span> <p class="text-[10px] text-text-muted">Receive alerts for deadlines and reviews</p></div> <button> </button></div> <div class="flex items-center justify-between py-2"><span class="text-sm text-text-secondary">Offline Queue</span> <span> </span></div> <div class="flex items-center justify-between py-2"><span class="text-sm text-text-secondary">Connection</span> <span class="text-sm font-semibold text-gov-green">Online</span></div></div></div> <button class="w-full py-4 border-2 border-gov-red/30 text-gov-red font-semibold rounded-xl min-h-[56px] hover:bg-gov-red/5 transition-colors">Sign Out</button></div></div>');function qe(K,W){fe(W,!0);const u=()=>Se(Ne,"$profile",Y),[Y,Z]=$e();let v=n(""),ee=n(""),l=n(""),m=n(""),i=n(!1),x=n(0),f=n(!1),g=n(!1);ge(async()=>{u()&&o(v,u().full_name||"",!0),Oe().then(d=>o(x,d,!0));const{isVoiceEnabled:r}=await D(async()=>{const{isVoiceEnabled:d}=await import("../chunks/E7PTwa2f.js");return{isVoiceEnabled:d}},[],import.meta.url);o(f,r(),!0),"Notification"in window&&o(g,Notification.permission==="granted")});async function te(){const{toggleVoiceGuidance:r}=await D(async()=>{const{toggleVoiceGuidance:d}=await import("../chunks/E7PTwa2f.js");return{toggleVoiceGuidance:d}},[],import.meta.url);o(f,r(),!0)}async function ae(){o(i,!0);const{error:r}=await J.from("profiles").update({full_name:s(v)}).eq("id",u().id);r?p("error",r.message):p("success","Profile updated"),o(i,!1)}async function se(){if(s(l)!==s(m)){p("warning","Passwords do not match");return}if(s(l).length<6){p("warning","Password must be at least 6 characters");return}o(i,!0);const{error:r}=await J.auth.updateUser({password:s(l)});r?p("error",r.message):(p("success","Password changed"),o(ee,""),o(l,""),o(m,"")),o(i,!1)}async function re(){await Ee(),Ve("/")}var k=Te();ke("a30v8d",r=>{he(()=>{we.title="Settings — Smart E-VISION"})});var U=e(t(k),2),$=t(U),A=e(t($),2),S=t(A),M=e(t(S),2);G(M),a(S);var E=e(S,2),q=e(t(E),2),oe=t(q,!0);a(q),a(E);var N=e(E,2),B=e(t(N),2),ie=t(B,!0);a(B),a(N);var y=e(N,2),ne=t(y,!0);a(y),a(A),a($);var V=e($,2),Q=e(t(V),2),O=t(Q),z=e(t(O),2);G(z),a(O);var T=e(O,2),F=e(t(T),2);G(F),a(T);var _=e(T,2),le=t(_,!0);a(_),a(Q),a(V);var C=e(V,2),X=e(t(C),2),R=t(X),h=e(t(R),2),de=e(t(h),2);a(h),a(R);var I=e(R,2),w=e(t(I),2),ce=t(w,!0);a(w),a(I);var H=e(I,2),j=e(t(H),2),pe=t(j);a(j),a(H),Pe(2),a(X),a(C);var ue=e(C,2);a(U),a(k),ye(()=>{c(oe,u()?.id?"Loaded from Supabase":"—"),c(ie,u()?.role||"—"),y.disabled=s(i),c(ne,s(i)?"Saving...":"Save Changes"),_.disabled=s(i),c(le,s(i)?"Updating...":"Change Password"),P(h,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gov-blue focus:ring-offset-2 ${s(f)?"bg-gov-blue":"bg-gray-200"}`),P(de,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s(f)?"translate-x-6":"translate-x-1"}`),P(w,1,`px-3 py-1.5 text-xs font-bold rounded-lg border-2 ${s(g)?"border-gov-green text-gov-green bg-gov-green/5":"border-gov-blue text-gov-blue hover:bg-gov-blue/5"} transition-colors`),c(ce,s(g)?"SUBSCRIBED":"Subscribe Now"),P(j,1,`text-sm font-semibold ${s(x)>0?"text-gov-gold-dark":"text-gov-green"}`),c(pe,`${s(x)??""} file${s(x)!==1?"s":""} pending`)}),L(M,()=>s(v),r=>o(v,r)),b("click",y,ae),L(z,()=>s(l),r=>o(l,r)),L(F,()=>s(m),r=>o(m,r)),b("click",_,se),b("click",h,te),b("click",w,async()=>{const{subscribeToPush:r}=await D(async()=>{const{subscribeToPush:be}=await import("../chunks/CISyghF3.js");return{subscribeToPush:be}},__vite__mapDeps([0,1,2,3]),import.meta.url);await r()&&o(g,!0)}),b("click",ue,re),me(K,k),_e(),Z()}ve(["click"]);export{qe as component};
