import{d as _e,a as k,f as S,s as _,b as vt}from"../chunks/zt7kUNSb.js";import{p as Ie,d as E,f as ut,o as Ee,j as Pe,t as pt,a as Be,e as Me,s as r,c as e,b as j,g as a,$ as Ve,r as t,h as le,n as Dt,i as M}from"../chunks/D02y27Ec.js";import{i as Lt}from"../chunks/CyaklKEO.js";import{e as Rt,i as $t}from"../chunks/CUJHGDU6.js";import{t as y,f as Ft,a as U}from"../chunks/Mk7LNAF3.js";import{s as z,h as qe,a as He,c as Qe,b as We}from"../chunks/DG2cR9Zm.js";import{a as Ge,s as Ze}from"../chunks/HxVFllSf.js";import{p as Je}from"../chunks/t4rw-3Qc.js";import{S as V,C as Xe}from"../chunks/7c_gSnqO.js";import{S as ne}from"../chunks/BlBMRgHN.js";import"../chunks/Cf3REhc8.js";import{P as Ke,S as be,r as mt}from"../chunks/BYT0fqb7.js";import{normalizeComplianceStatus as Ye,calculateCompliance as ta,groupSubmissionsByWeek as ea,getComplianceClass as aa}from"../chunks/rRhaEF5Q.js";import{s as ra}from"../chunks/BESCyOOZ.js";import{Z as oa}from"../chunks/Dfy_UmCS.js";import{C as sa,A as ia,B as la,Q as na}from"../chunks/CpwdSydo.js";_e(["click"]);async function he({action:g,entity_type:T,entity_id:u,details:m}){try{const{data:D}=await z.auth.getUser(),x=D.user;if(!x)return;const{data:p}=await z.from("audit_logs").select("current_hash").order("created_at",{ascending:!1}).limit(1).maybeSingle(),s=p?.current_hash||"0".repeat(64),n=new Date().toISOString(),c=JSON.stringify({user_id:x.id,action:g,entity_type:T||null,entity_id:u||null,details:m||null,prev_hash:s,timestamp:n}),d=new TextEncoder().encode(c),P=await crypto.subtle.digest("SHA-256",d),F=Array.from(new Uint8Array(P)).map(w=>w.toString(16).padStart(2,"0")).join("");await z.from("audit_logs").insert({user_id:x.id,action:g,entity_type:T,entity_id:u,details:m,prev_hash:s,current_hash:F})}catch(D){console.error("Failed to log action:",D)}}function da(g,T){if(!g||g.length===0)return;const u=Object.keys(g[0]),D=[u.join(","),...g.map(n=>u.map(c=>{const d=n[c];return`"${d==null?"":String(d).replace(/"/g,'""')}"`}).join(","))].join(`
`),x=new Blob([D],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(x),s=document.createElement("a");s.setAttribute("href",p),s.setAttribute("download",`${T}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),he({action:"export_csv",details:{filename:T}})}async function ca(g,T="Compliance Report"){try{const u=await Ke.create(),m=u.addPage([600,800]),{width:D,height:x}=m.getSize(),p=await u.embedFont(be.HelveticaBold),s=await u.embedFont(be.Helvetica);m.drawRectangle({x:0,y:x-100,width:D,height:100,color:mt(0,.22,.66)}),m.drawText("Smart E-VISION",{x:50,y:x-55,size:24,font:p,color:mt(1,1,1)}),m.drawText(T,{x:50,y:x-80,size:14,font:s,color:mt(1,1,1)});let n=x-140;m.drawText(`Generated on: ${new Date().toLocaleString("en-PH")}`,{x:50,y:n,size:10,font:s,color:mt(.3,.3,.3)}),n-=50,m.drawText("Executive Summary",{x:50,y:n,size:16,font:p,color:mt(0,0,0)}),n-=40;const c=(w,L)=>{m.drawText(w,{x:60,y:n,size:12,font:p}),m.drawText(String(L),{x:200,y:n,size:12,font:s}),n-=25};c("Total Submissions:",g.totalUploads),c("Compliance Rate:",`${g.compliantRate}%`),c("Late Submissions:",g.lateCount),c("Non-Compliant:",g.nonCompliantCount),c("Total Teachers:",g.totalTeachers||"N/A"),m.drawText("Verified and Authenticated by Smart E-VISION Digital Archiving System",{x:50,y:50,size:8,font:s,color:mt(.5,.5,.5)});const d=await u.save(),P=new Blob([d],{type:"application/pdf"}),q=URL.createObjectURL(P),F=document.createElement("a");F.href=q,F.download=`${T.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`,F.click(),he({action:"export_pdf",details:{title:T}})}catch(u){console.error("Failed to generate PDF:",u)}}function va(g,T,u=[]){const m=[],D=[...T].sort((s,n)=>n.week_number-s.week_number);if(D.length===0)return[];const x=D.slice(0,5).map(s=>s.week_number),p=new Map;return g.forEach(s=>{const n=s.user_id;p.has(n)||p.set(n,[]),p.get(n).push(s)}),u.forEach(s=>{const n=p.get(s.id)||[];let c=0;const d=[];for(const P of x){const q=n.filter(w=>w.week_number===P);if(q.length===0||q.some(w=>{const L=Ye(w.compliance_status);return L==="late"||L==="non-compliant"}))c++,d.push(P);else break}c>=3&&m.push({user_id:s.id,full_name:s.full_name,school_id:s.school_id,school_name:s.schools?.name||"Common School",pattern_type:"consecutive_late_missing",severity:c>=4?"high":"medium",details:`${s.full_name} has problematic submissions for ${c} consecutive weeks.`,weeks:[...d].reverse(),count:c})}),m.sort((s,n)=>{const c={high:3,medium:2,low:1};return c[n.severity]-c[s.severity]})}var ua=S('<div class="glass-card-static p-8 animate-pulse"><div class="h-4 bg-gray-200 rounded w-24 mb-4"></div> <div class="h-10 bg-gray-200 rounded w-16"></div></div>'),pa=S('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>'),ma=S('<div class="text-center p-3 rounded-lg border border-border-subtle bg-surface-muted/30 transition-all hover:border-gov-blue/30 hover:bg-gov-blue/5"><p class="text-[10px] text-text-muted font-black uppercase tracking-tighter mb-1"> </p> <p> </p></div>'),ga=S('<div class="text-center py-8"><p class="text-text-muted mb-4 font-medium">No historical data available.</p> <a href="/dashboard/upload" class="inline-flex items-center px-4 py-2 rounded bg-gov-blue/10 text-gov-blue text-xs font-black uppercase tracking-widest hover:bg-gov-blue/20 transition-colors">UPLOAD</a></div>'),xa=S('<div class="flex items-center justify-center h-[200px] text-text-muted font-medium bg-surface-muted/30 rounded-lg border border-dashed border-border-strong"><p>Awaiting submission data for analysis</p></div>'),ba=S('<div class="p-12 text-center"><p class="text-text-muted font-bold uppercase tracking-widest text-xs mb-4">Archive Empty</p> <a href="/dashboard/upload" class="inline-flex items-center px-6 py-3 rounded bg-gov-blue text-white text-xs font-black uppercase tracking-widest hover:bg-gov-blue-dark transition-all shadow-md">SUBMIT FIRST RECORD</a></div>'),_a=S('<tr class="hover:bg-surface-muted/50 transition-colors"><td class="px-6 py-5 font-bold text-text-primary truncate max-w-[240px] sticky left-0 bg-white/5 z-0 leading-relaxed"> </td><td class="px-4 py-5 text-text-secondary font-medium"> </td><td class="px-4 py-5 text-center text-text-secondary text-xs font-semibold"> </td><td class="px-4 py-5 text-center"><!></td><td class="px-6 py-5 text-right text-text-muted text-[11px] font-bold uppercase tracking-tighter"> </td></tr>'),ha=S('<div class="p-4 space-y-3 active:bg-gray-50 transition-colors"><div class="flex justify-between items-start gap-3"><p class="font-bold text-text-primary line-clamp-2 leading-tight flex-1"> </p> <!></div> <div class="flex items-center justify-between text-[11px] text-text-muted"><div class="flex items-center gap-2"><span class="px-1.5 py-0.5 bg-gray-100 rounded text-text-secondary font-bold"> </span> <span> </span></div> <span class="font-medium"> </span></div></div>'),fa=S('<div class="hidden sm:block overflow-x-auto"><table class="w-full text-sm"><thead><tr class="border-b border-gray-100 bg-white/30"><th class="px-6 py-4 text-left text-xs font-bold text-text-muted uppercase tracking-wider sticky left-0 bg-white/30 backdrop-blur-md z-10"><button class="hover:text-text-primary flex items-center gap-1"> </button></th><th class="px-4 py-4 text-left text-xs font-bold text-text-muted uppercase tracking-wider">Type</th><th class="px-4 py-4 text-center text-xs font-bold text-text-muted uppercase tracking-wider">Load</th><th class="px-4 py-4 text-center text-xs font-bold text-text-muted uppercase tracking-wider"><button class="hover:text-text-primary flex items-center gap-1 mx-auto"> </button></th><th class="px-6 py-4 text-right text-xs font-bold text-text-muted uppercase tracking-wider"><button class="hover:text-text-primary flex items-center gap-1 ml-auto"> </button></th></tr></thead><tbody class="divide-y divide-gray-50/50"></tbody></table></div> <div class="sm:hidden divide-y divide-gray-100"></div>',1),ya=S(`<div class="mb-10"><div class="flex items-center gap-3 mb-6"><div class="p-2 rounded-xl bg-gov-blue/10 text-gov-blue"><!></div> <h2 class="text-xl font-black text-text-primary tracking-tight">Quick Actions</h2></div> <div class="grid grid-cols-1 sm:grid-cols-3 gap-6"><a href="/dashboard/upload" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Upload Document</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Submit DLL, ISP, or ISR reports to the central
                            archive.</p></div></a> <a href="/dashboard/archive" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Access Archive</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Browse and retrieve your previously submitted
                            documents.</p></div></a> <a href="/dashboard/load" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Teaching Load</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Manage subjects, grade levels, and assigned
                            schedules.</p></div></a> <button class="gov-card p-6 flex flex-col gap-4 no-underline group text-left w-full cursor-pointer"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Scan Document</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Verify document authenticity using the built-in QR
                            scanner.</p></div></button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10"><div><!></div> <div><!></div> <div><!></div> <div><!></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10"><div class="gov-card-static p-8"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest mb-6 flex items-center gap-2"><span class="w-1.5 h-6 bg-gov-blue rounded-full"></span> Weekly Progress</h3> <div class="grid grid-cols-4 gap-3"></div> <!></div> <div class="gov-card-static p-8"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest mb-6 flex items-center gap-2"><span class="w-1.5 h-6 bg-gov-green rounded-full"></span> Performance Trend</h3> <!></div></div> <div class="gov-card-static overflow-hidden mb-10"><div class="px-8 py-5 border-b border-border-subtle bg-surface-muted/30 flex items-center justify-between flex-wrap gap-4"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest">Data Archive</h3> <select class="px-4 py-2 text-xs font-bold uppercase tracking-wider bg-white border border-border-strong rounded shadow-sm focus:ring-2 focus:ring-gov-blue/20 outline-none transition-all"><option>Display All Records</option><option>Filter: Compliant</option><option>Filter: Late</option><option>Filter: Non-compliant</option></select></div> <!></div>`,1),wa=S('<div class="p-10 text-center"><p class="text-text-muted font-medium">No recent activity yet</p></div>'),ka=S('<div class="flex items-center justify-between px-6 py-4 hover:bg-white/40 transition-colors"><div class="flex items-center gap-3 min-w-0"><span class="text-sm font-medium text-text-primary truncate"> </span></div> <div class="flex items-center gap-4 flex-shrink-0"><!> <span class="text-xs text-text-muted"> </span></div></div>'),Sa=S('<div class="divide-y divide-gray-100"></div>'),Ca=S('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-12"><div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></div> <div class="mb-10"><h2 class="text-sm font-black text-text-muted uppercase tracking-[0.2em] mb-6">Official Reports & Export</h2> <div class="gov-card p-8 flex flex-wrap items-center gap-6 bg-surface-muted/30"><button class="py-3 px-8 bg-white border border-border-strong rounded-md text-xs font-black uppercase tracking-widest text-text-primary hover:border-gov-blue hover:text-gov-blue transition-all flex items-center gap-2 shadow-sm cursor-pointer">CSV</button> <button class="py-3 px-8 bg-gov-blue border border-gov-blue rounded-md text-xs font-black uppercase tracking-widest text-white hover:bg-gov-blue-dark transition-all flex items-center gap-2 shadow-md cursor-pointer">PDF</button></div></div> <div><h2 class="text-xl font-bold text-text-primary mb-4">Recent Activity</h2> <div class="glass-card-static overflow-hidden"><!></div></div>',1),Ta=S('<div><div class="mb-10"><h1 class="text-3xl font-black text-text-primary tracking-tight"> </h1> <p class="text-base text-text-secondary mt-1">Welcome back, <span class="font-bold text-gov-blue"> </span></p></div> <!></div>');function Va(g,T){Ie(T,!0);const u=()=>Ze(Je,"$profile",m),[m,D]=Ge();let x=E(ut([])),p=E(ut([])),s=E(ut({Compliant:0,Late:0,NonCompliant:0,totalUploaded:0,expected:0,rate:0})),n=E(0),c=E(ut([])),d=ut({totalUploads:0,compliantRate:0,pendingQueue:0,totalTeachers:0,compliantCount:0,lateCount:0,nonCompliantCount:0}),P=E(ut([])),q=E(!0),F,w=E("created_at"),L=E("desc"),jt=E("all");Ee(async()=>{await de(),fe(),j(q,!1)}),Pe(()=>{F&&z.removeChannel(F)});function fe(){F=z.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"submissions"},()=>{de()}).subscribe()}async function de(){const o=u();if(!o)return;const i=o.role;i==="Teacher"?await ye(o):await we(o,i)}async function ye(o){const[i,l,h]=await Promise.all([z.from("submissions").select("id, file_name, doc_type, compliance_status, created_at, week_number, teaching_loads(subject, grade_level)").eq("user_id",o.id).order("created_at",{ascending:!1}).limit(50),z.from("teaching_loads").select("*",{count:"exact",head:!0}).eq("user_id",o.id).eq("is_active",!0),z.from("academic_calendar").select("*").eq("school_year","2025-2026").order("week_number",{ascending:!0})]);j(x,i.data||[],!0),j(n,l.count||0,!0);const b=h.data||[];j(s,ta(a(x),a(n)),!0),j(p,ea(a(x),a(n),8,b),!0),j(c,(i.data||[]).slice(0,5),!0),d.totalUploads=(i.data||[]).length,d.compliantRate=a(s).rate}async function we(o,i){const{data:l}=await z.from("academic_calendar").select("*").eq("school_year","2025-2026").order("week_number",{ascending:!0}),h=l||[];let b=z.from("profiles").select("*, schools(name)").eq("role","Teacher"),R=z.from("submissions").select("*, uploader:profiles!inner(school_id, district_id)",{count:"exact"});i==="School Head"||i==="Master Teacher"?o.school_id&&(b=b.eq("school_id",o.school_id),R=R.eq("profiles.school_id",o.school_id)):i==="District Supervisor"&&o.district_id&&(b=b.eq("district_id",o.district_id),R=R.eq("profiles.district_id",o.district_id));const[et,N]=await Promise.all([b,R.order("created_at",{ascending:!1})]),W=et.data||[],$=N.data||[];d.totalTeachers=W.length,d.totalUploads=N.count||0,d.compliantCount=$.filter(A=>A.compliance_status==="compliant"||A.compliance_status==="on-time").length,d.lateCount=$.filter(A=>A.compliance_status==="late").length,d.nonCompliantCount=$.filter(A=>A.compliance_status==="non-compliant"||A.compliance_status==="missing").length,j(c,$.slice(0,5),!0),j(P,va($,h,W),!0)}const It=M(()=>()=>{let o=[...a(x)];return a(jt)!=="all"&&(o=o.filter(i=>{let l=i.compliance_status||"non-compliant";return l.toLowerCase()==="on-time"||l.toLowerCase()==="compliant"?l="compliant":l.toLowerCase()==="late"?l="late":(l.toLowerCase()==="missing"||l.toLowerCase()==="non-compliant")&&(l="non-compliant"),l===a(jt)})),o.sort((i,l)=>{const h=i[a(w)]||"",b=l[a(w)]||"";return a(L)==="asc"?h>b?1:-1:h<b?1:-1}),o.slice(0,20)});function Et(o){a(w)===o?j(L,a(L)==="asc"?"desc":"asc",!0):(j(w,o,!0),j(L,"desc"))}function Pt(o){return new Date(o).toLocaleDateString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ce(o){const i=(o.compliance_status||"missing").toLowerCase();return i==="compliant"||i==="on-time"?"compliant":i==="late"?"late":"non-compliant"}var Bt=Ta();qe("x1i5gj",o=>{Me(()=>{Ve.title="Dashboard — Smart E-VISION"})});var Mt=e(Bt),Vt=e(Mt),ke=e(Vt,!0);t(Vt);var ve=r(Vt,2),ue=r(e(ve)),Se=e(ue,!0);t(ue),t(ve),t(Mt);var Ce=r(Mt,2);{var Te=o=>{var i=pa();Rt(i,20,()=>Array(4),$t,(l,h)=>{var b=ua();k(l,b)}),t(i),k(o,i)},Ae=o=>{var i=ya(),l=le(i),h=e(l),b=e(h),R=e(b);oa(R,{size:20,fill:"currentColor"}),t(b),Dt(2),t(h);var et=r(h,2),N=e(et),W=e(N),$=e(W);sa($,{size:24}),t(W),Dt(2),t(N);var A=r(N,2),at=e(A),qt=e(at);ia(qt,{size:24}),t(at),Dt(2),t(A);var H=r(A,2),gt=e(H),Ut=e(gt);la(Ut,{size:24}),t(gt),Dt(2),t(H);var xt=r(H,2),rt=e(xt),Nt=e(rt);na(Nt,{size:24}),t(rt),Dt(2),t(xt),t(et),t(l);var bt=r(l,2),ot=e(bt),Ht=e(ot);V(Ht,{icon:"CloudUpload",get value(){return d.totalUploads},label:"Total Uploads"}),t(ot);var O=r(ot,2),G=e(O);V(G,{icon:"ShieldCheck",get value(){return`${a(s).rate??""}%`},label:"Compliance Rate",color:"from-gov-green to-gov-green-dark"}),t(O);var st=r(O,2),Z=e(st);V(Z,{icon:"Clock",get value(){return a(s).Late},label:"Late Submissions",color:"from-gov-gold to-gov-gold-dark"}),t(st);var _t=r(st,2),it=e(_t);V(it,{icon:"ShieldAlert",get value(){return a(s).NonCompliant},label:"Non-compliant",color:"from-gov-red to-red-700"}),t(_t),t(bt);var J=r(bt,2),X=e(J),ht=r(e(X),2);Rt(ht,21,()=>a(p),$t,(v,C)=>{var B=ma(),I=e(B),yt=e(I,!0);t(I);var nt=r(I,2),wt=e(nt);t(nt),t(B),pt(kt=>{_(yt,a(C).label),He(nt,1,`text-xl font-black ${kt??""}`),_(wt,`${a(C).rate??""}%`)},[()=>aa(a(C).rate).replace("gov-","gov-")]),k(v,B)}),t(ht);var Ot=r(ht,2);{var zt=v=>{var C=ga();k(v,C)};Lt(Ot,v=>{a(p).length===0&&v(zt)})}t(X);var lt=r(X,2),Qt=r(e(lt),2);{var ft=v=>{{let C=M(()=>a(p).map(I=>I.label)),B=M(()=>[{label:"My Compliance",data:a(p).map(I=>I.rate),color:"#1b4294"}]);Xe(v,{get labels(){return a(C)},get datasets(){return a(B)},height:200})}},Le=v=>{var C=xa();k(v,C)};Lt(Qt,v=>{a(p).length>0?v(ft):v(Le,!1)})}t(lt),t(J);var Wt=r(J,2),Gt=e(Wt),Zt=r(e(Gt),2),Jt=e(Zt);Jt.value=Jt.__value="all";var Xt=r(Jt);Xt.value=Xt.__value="Compliant";var Kt=r(Xt);Kt.value=Kt.__value="Late";var pe=r(Kt);pe.value=pe.__value="Non-Compliant",t(Zt),t(Gt);var Re=r(Gt,2);{var $e=v=>{var C=ba();k(v,C)},je=M(()=>a(It)().length===0),Ue=v=>{var C=fa(),B=le(C),I=e(B),yt=e(I),nt=e(yt),wt=e(nt),kt=e(wt),Ne=e(kt);t(kt),t(wt);var Yt=r(wt,3),te=e(Yt),Oe=e(te);t(te),t(Yt);var me=r(Yt),ee=e(me),ze=e(ee);t(ee),t(me),t(nt),t(yt);var ge=r(yt);Rt(ge,21,()=>a(It)(),$t,(ae,f)=>{const K=M(()=>Array.isArray(a(f).teaching_loads)?a(f).teaching_loads[0]:a(f).teaching_loads);var Y=_a(),Q=e(Y),St=e(Q,!0);t(Q);var Ct=r(Q),re=e(Ct,!0);t(Ct);var dt=r(Ct),Tt=e(dt,!0);t(dt);var tt=r(dt),oe=e(tt);{let ct=M(()=>ce(a(f)));ne(oe,{get status(){return a(ct)},size:"sm"})}t(tt);var At=r(tt),se=e(At,!0);t(At),t(Y),pt(ct=>{We(Q,"title",a(f).file_name),_(St,a(f).file_name),_(re,a(f).doc_type),_(Tt,a(K)?`${a(K).subject} - Gr. ${a(K).grade_level}`:"—"),_(se,ct)},[()=>Pt(a(f).created_at)]),k(ae,Y)}),t(ge),t(I),t(B);var xe=r(B,2);Rt(xe,21,()=>a(It)(),$t,(ae,f)=>{const K=M(()=>Array.isArray(a(f).teaching_loads)?a(f).teaching_loads[0]:a(f).teaching_loads);var Y=ha(),Q=e(Y),St=e(Q),Ct=e(St,!0);t(St);var re=r(St,2);{let ie=M(()=>ce(a(f)));ne(re,{get status(){return a(ie)},size:"sm"})}t(Q);var dt=r(Q,2),Tt=e(dt),tt=e(Tt),oe=e(tt,!0);t(tt);var At=r(tt,2),se=e(At,!0);t(At),t(Tt);var ct=r(Tt,2),Fe=e(ct,!0);t(ct),t(dt),t(Y),pt(ie=>{_(Ct,a(f).file_name),_(oe,a(f).doc_type),_(se,a(K)?`${a(K).subject} • G${a(K).grade_level}`:"No Teaching Load"),_(Fe,ie)},[()=>Pt(a(f).created_at)]),k(ae,Y)}),t(xe),pt(()=>{_(Ne,`Document ${a(w)==="file_name"?a(L)==="asc"?"↑":"↓":""}`),_(Oe,`Status ${a(w)==="compliance_status"?a(L)==="asc"?"↑":"↓":""}`),_(ze,`Date ${a(w)==="created_at"?a(L)==="asc"?"↑":"↓":""}`)}),vt("click",kt,()=>Et("file_name")),vt("click",te,()=>Et("compliance_status")),vt("click",ee,()=>Et("created_at")),k(v,C)};Lt(Re,v=>{a(je)?v($e):v(Ue,!1)})}t(Wt),vt("click",xt,()=>ra.set(!0)),y(1,l,()=>Ft,()=>({duration:600,delay:0})),y(1,ot,()=>U,()=>({y:20,duration:400,delay:0})),y(1,O,()=>U,()=>({y:20,duration:400,delay:100})),y(1,st,()=>U,()=>({y:20,duration:400,delay:200})),y(1,_t,()=>U,()=>({y:20,duration:400,delay:300})),y(1,X,()=>U,()=>({y:20,duration:500,delay:400})),y(1,lt,()=>U,()=>({y:20,duration:500,delay:500})),Qe(Zt,()=>a(jt),v=>j(jt,v)),y(1,Wt,()=>Ft,()=>({duration:500,delay:600})),k(o,i)},De=o=>{var i=Ca(),l=le(i),h=e(l),b=e(h);V(b,{icon:"Users",get value(){return d.totalTeachers},label:"TOTAL TEACHERS"}),t(h);var R=r(h,2),et=e(R);V(et,{icon:"FileText",get value(){return d.totalUploads},label:"TOTAL SUBMISSIONS",color:"gov-blue"}),t(R);var N=r(R,2),W=e(N);V(W,{icon:"ShieldCheck",get value(){return d.compliantCount},label:"COMPLIANT",color:"gov-green"}),t(N);var $=r(N,2),A=e($);V(A,{icon:"Clock",get value(){return d.lateCount},label:"LATE",color:"gov-gold"}),t($);var at=r($,2),qt=e(at);V(qt,{icon:"ShieldX",get value(){return d.nonCompliantCount},label:"NON-COMPLIANT",color:"gov-red"}),t(at),t(l);var H=r(l,2),gt=r(e(H),2),Ut=e(gt),xt=r(Ut,2);t(gt),t(H);var rt=r(H,2),Nt=r(e(rt),2),bt=e(Nt);{var ot=O=>{var G=wa();k(O,G)},Ht=O=>{var G=Sa();Rt(G,21,()=>a(c),$t,(st,Z,_t)=>{var it=ka(),J=e(it),X=e(J),ht=e(X,!0);t(X),t(J);var Ot=r(J,2),zt=e(Ot);{let ft=M(()=>a(Z).compliance_status==="on-time"||a(Z).compliance_status==="compliant"?"compliant":a(Z).compliance_status==="late"?"late":"non-compliant");ne(zt,{get status(){return a(ft)},size:"sm"})}var lt=r(zt,2),Qt=e(lt,!0);t(lt),t(Ot),t(it),pt(ft=>{_(ht,a(Z).file_name),_(Qt,ft)},[()=>Pt(a(Z).created_at)]),y(1,it,()=>U,()=>({x:-20,duration:400,delay:700+_t*50})),k(st,it)}),t(G),k(O,G)};Lt(bt,O=>{a(c).length===0?O(ot):O(Ht,!1)})}t(Nt),t(rt),y(1,h,()=>U,()=>({y:20,duration:400,delay:0})),y(1,R,()=>U,()=>({y:20,duration:400,delay:100})),y(1,N,()=>U,()=>({y:20,duration:400,delay:150})),y(1,$,()=>U,()=>({y:20,duration:400,delay:200})),y(1,at,()=>U,()=>({y:20,duration:400,delay:300})),vt("click",Ut,()=>da(a(c),`Data_${new Date().toISOString().split("T")[0]}`)),vt("click",xt,()=>ca(d,`${u()?.role} Summary`)),y(1,H,()=>Ft,()=>({duration:600,delay:350})),y(1,rt,()=>Ft,()=>({duration:600,delay:600})),k(o,i)};Lt(Ce,o=>{a(q)?o(Te):u()?.role==="Teacher"?o(Ae,1):o(De,!1)})}t(Bt),pt(()=>{_(ke,u()?.role==="Teacher"?"Overview":"Supervision Dashboard"),_(Se,u()?.full_name||"User")}),k(g,Bt),Be(),D()}_e(["click"]);export{Va as component};
